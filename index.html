<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Turismo</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" crossorigin="anonymous"/>
    <link rel="stylesheet" href="css/estilos.css">
</head>
<body>
    <div class="alert alert-warning alert-dismissible" id="alerta">
        <a href="#" class="close" id="cerrarAlerta">&times;</a>
        <p><strong>Precaución!</strong> <span id="txtAlerta">Indicates a warning that might need attention.</span></p>  
    </div>
    <form action="" method="get" autocomplete="off">
        <div class="row form-row text-center formulario">
            <div class="col-lg-7 col-md-12 grupoForm">
                <div class="row">
                    <div class="col-lg-3 col-md-3">
                        <input class="form-control" type="text" name="destino" id="destino" placeholder="¿A que pais vas?">
                    </div>
                    <div class="col-lg-4 col-md-4">
                        <input class="form-control" type="text" name="destino" id="ciudadDestino" placeholder="¿A que ciudad vas?" disabled>
                    </div>
                    <div class="col-lg-5 col-md-5">
                        <input class="form-control" type="datetime" name="fechas" id="fechas" placeholder="Check in - Check out" value="">
                    </div>
                </div>
            </div>
            <div class="col-lg-5 col-md-12 grupoForm">
                <div class="row">
                    <div class="col-lg-8 col-md-8">
                        <input class="form-control" type="text" name="turistas" id="inputModal" value="1 Adulto(s) - 0 Niño(s) - 1 Habitación(es)" data-toggle="modal" data-target="#Modal" readonly>
                    </div>
                    <div class="col-lg-4 col-md-4">
                        <input class="btn btn-secondary btn-block boton" type="submit" id="btnBuscar" value="Buscar">
                    </div>
                </div>
            </div>
        </div>
    </form>

    <section>
        <article class="row hotel">
            <div class="col-lg-4 imagen">
                <img class="imagenHotel" src="img/hotel3.jpg" >
            </div>
            <div class="col-lg-8">
                <div class="row">
                    <div class="col-lg-7 col-md-7 col-sm-12">
                        <div class="titulo">
                            <h2><strong>Sophia House</strong></h2>
                        </div>
                        <div class="ubicacion">
                            <p>Cartagena de Indias  Mostrar en el mapa  a 1,4 km del centro</p>
                            <div>
                                - Cerca de la playa
                            </div>
                        </div>
                        <div class="descripcion">
                            <p>Apartamento de 1 dormitorio</p>
                        </div>
                        <div class="detalles">
                            <p><strong>Apartamento entero ­ •­ 1 dormitorio •­ 1 baño</strong></p>
                        </div>
                        <div class="especificaciones">
                            1 litera
                        </div>
                    </div>
                    <div class="col-lg-5 col-md-5 col-sm-12 izq">
                        <div class="puntaje">
                            <div class="row">
                                <div class="col clearfix">
                                    <div class="float-left derxs">
                                        <p class="clasificacion text-info"><strong>Excepcional</strong></p>
                                    </div>
                                    <div class="float-right califiacion derxs">
                                        <p>10.0</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="duracion">
                            <p>9 noches, 1 adulto</p>
                        </div>
                        <div class="precio">
                            <p class="valor">COP 400.000</p>
                            <div class="detalle">
                                <p>Se pueden aplicar otros cargos</p>
                            </div>
                        </div>
                        <div class="botonTarjeta">
                            <input type="button" class="btn btn-primary btn-disp" value="Ver disponibilidad">
                        </div>
                    </div>
                </div>
            </div>
        </article>
    </section>

    <div class="modal fade" id="Modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLongTitle">Turistas</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <div class="row">
                    <div class="col-lg-7">
                        <p>Adulto(s):</p>
                    </div>
                    <div class="col-lg-1">
                        <p><span id="adultos">1</span></p>
                    </div>
                  <div class="col-lg-4">
                        <input class="btn btn-secondary sumar" id="sumAd" type="submit" value="+">
                        <input class="btn btn-secondary restar" id="resAd" type="submit" value="-">
                  </div>
              </div>
                <div class="row">
                    <div class="col-lg-7">
                        <p>Niño(s):</p>
                    </div>
                    <div class="col-lg-1">
                        <p><span id="ninos">0</span></p>
                    </div>
                    <div class="col-lg-4">
                        <input class="btn btn-secondary sumar" id="sumNn" type="submit" value="+">
                        <input class="btn btn-secondary restar" id="resNn" type="submit" value="-">
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-7">
                        <p>Habitación(es):</p>
                    </div>
                    <div class="col-lg-1">
                        <p><span id="habitaciones">1</span></p>
                    </div>
                    <div class="col-lg-4">
                        <input class="btn btn-secondary sumar" id="sumHb" type="submit" value="+">
                        <input class="btn btn-secondary restar" id="resHb" type="submit" value="-">
                    </div>
                </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
              <button type="button" class="btn btn-primary" id="aceptarModal">Aceptar</button>
            </div>
          </div>
        </div>
      </div>
</body>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap-4-autocomplete/dist/bootstrap-4-autocomplete.min.js" crossorigin="anonymous"></script>

<script type="text/javascript">
    let btnSumAd = document.getElementById('sumAd');
    let btnResAd = document.getElementById('resAd');
    let btnSumNn = document.getElementById('sumNn');
    let btnResNn = document.getElementById('resNn');
    let btnSumHb = document.getElementById('sumHb');
    let btnResHb = document.getElementById('resHb');
    let btnAceptar = document.getElementById('aceptarModal');
    let inputDestino = document.getElementById('destino');
    let inputCiudadDestino = document.getElementById('ciudadDestino');
    let btnBuscar = document.getElementById('btnBuscar');
    let alerta = document.getElementById('alerta');
    let equisAlerta = document.getElementById('cerrarAlerta');

    //window.location.href = window.location.href + '?destino=paris';

    let requestOptions = {
    method: 'GET',
    redirect: 'follow'
    };

    $('#fechas').daterangepicker({
        autoUpdateInput: false,
        locale: {
            format: 'MM/DD/YYYY',
            separator: ' - ',
            applyLabel: 'Aceptar',
            cancelLabel: 'Borrar',
            fromLabel: 'Desde',
            toLabel: 'A',
            customRangeLabel: 'Personalizar',
            weekLabel: 'S',
            daysOfWeek: [
                'Do',
                'Lu',
                'Ma',
                'Mi',
                'Ju',
                'Vi',
                'Sa'
            ],
            monthNames: [
                'Enero',
                'Febrero',
                'Marzo',
                'Abril',
                'Mayo',
                'junio',
                'Julio',
                'Agosto',
                'Septiembre',
                'Octubre',
                'Noviembre',
                'Diciembre'
            ],
            firstDay: 1
        }
    });

    $('#fechas').on('apply.daterangepicker', function(ev, picker) {
        $(this).val(picker.startDate.format('MM/DD/YYYY') + ' - ' + picker.endDate.format('MM/DD/YYYY'));
    });

    $('#fechas').on('cancel.daterangepicker', function(ev, picker) {
        $(this).val('');
    });

    btnSumAd.addEventListener('click', e => {
        let contador = document.getElementById('adultos');
        contador.innerHTML = parseInt(contador.textContent) + 1;
    });

    btnResAd.addEventListener('click', e => {
        let contador = document.getElementById('adultos');
        let cantidad = parseInt(contador.textContent);

        if(cantidad > 1) {
            contador.innerHTML = cantidad - 1;
        }
    });

    btnSumNn.addEventListener('click', e => {
        let contador = document.getElementById('ninos');
        contador.innerHTML = parseInt(contador.textContent) + 1;
    });

    btnResNn.addEventListener('click', e => {
        let contador = document.getElementById('ninos');
        let cantidad = parseInt(contador.textContent);

        if(cantidad > 0) {
            contador.innerHTML = cantidad - 1;
        }
    });

    btnSumHb.addEventListener('click', e => {
        let contador = document.getElementById('habitaciones');
        contador.innerHTML = parseInt(contador.textContent) + 1;
    });

    btnResHb.addEventListener('click', e => {
        let contador = document.getElementById('habitaciones');
        let cantidad = parseInt(contador.textContent);

        if(cantidad > 1) {
            contador.innerHTML = cantidad - 1;
        }
    });

    btnAceptar.addEventListener('click', e => {
        let adultos = parseInt(document.getElementById('adultos').textContent);
        let ninos = parseInt(document.getElementById('ninos').textContent);
        let habitaciones = parseInt(document.getElementById('habitaciones').textContent);

        let turistas = document.getElementById('inputModal');
        turistas.setAttribute('value',`${adultos} Adulto(s) - ${ninos} Niño(s) - ${habitaciones} Habitación(es)`);
        $('#Modal').modal('hide')
    });

    inputDestino.addEventListener('blur', e => {
        if (!window.location.href.includes('?destino=')) {
            window.location.href = window.location.href + '?destino=paris';
        }
    });

    if (window.location.href.includes('destino')) {
        inputDestino.setAttribute('value','Paris');
        inputCiudadDestino.removeAttribute('disabled');
    }

    btnBuscar.addEventListener('click', e => {
        let pais = inputDestino.value;
        let ciudad = inputCiudadDestino.value;
        let fechas = document.getElementById('fechas').value;
        let turistas = document.getElementById('inputModal').value;

        let txtAlerta = document.getElementById('txtAlerta');

        console.log('mirame: ', turistas);

        if (pais.length !== 0) {
            if (ciudad.length !== 0) {
            if (fechas.length !== 0) {
                    if (turistas.length !== 0) {

                    } else {
                        txtAlerta.innerHTML = 'El campo de pasajeros se encuentra vacía';
                        alerta.style.display = 'block';
                    }
                } else {
                    txtAlerta.innerHTML = 'El campo de check-in y check-out se encuentra vacío';
                    alerta.style.display = 'block';
                }
            } else {
                txtAlerta.innerHTML = 'El campo de ciudad destino se encuentra vacío';
                alerta.style.display = 'block';
            }
        } else {
            console.log('que pasa: ', !(pais.length === 0));
            txtAlerta.innerHTML = 'El campo del pais destino se encuentra vacío';
            alerta.style.display = 'block';
        }

        e.preventDefault;
    });


    equisAlerta.addEventListener('click', e =>{
        alerta.style.display = 'none';
    });

    function test_function(){
        return "QWERQWERQWERQWERQWERQWER";
    }


    // fetch("https://restcountries.eu/rest/v2/all", requestOptions)
    // .then(response => response.json())
    // .then(result => paises(result))
    // .catch(error => console.log('error', error));

    // let paises = result => {
    //     let id = 1;
    //     let paises = new Map();

    //     result.forEach(element => {
    //         paises.set(element.name, id);
    //         id++;
    //     });
        
    //     $('#destino').autocomplete({
    //         source: Object.fromEntries(paises),
    //         highlightClass: 'text-danger',
    //         treshold: 2,
    //     });
    // }

    function fill_countrylist(contry_map) {
        $('#destino').autocomplete({
            source: Object.fromEntries(contry_map),
            highlightClass: 'text-danger',
            treshold: 2,
        });
    }

    
</script>
</html>